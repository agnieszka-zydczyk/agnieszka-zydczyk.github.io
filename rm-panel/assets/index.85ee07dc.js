import{v as j,f as z,H as C,R as N,i as R,a4 as w,j as V,s as O,r as m,o as n,c as f,w as c,a as v,n as d,t as l,k as t,l as o,F as u,q as g,d as _,b as A,J as M,K as B,_ as S}from"./index.ef40ff0d.js";import{r as D}from"./index.144d991d.js";var E={name:"rmRewardsPersonal",components:{vaxView:j,vaxForm:z,vaxBox:C,vaxButton:N,vaxInputField:R,rmAgeCategorySelect:D},data(){return{afterPost:()=>this.getJsonViewData(),ageOptionNames:w,ageOptionsPresent:[0,1,2,4]}},methods:{getAgeOptionName:e=>w[e+1],editPersonalReward(e){const i=e.target;var r;for(r=i;r.tagName.toUpperCase()!=="TR";r=r.parentElement);const x=r.getElementsByTagName("input");this.submitPostDirect({formName:"editPersonalReward",id:x[0].value,totalCount:x[1].value})}},mixins:[V,O]};const s=e=>(M("data-v-3a2ff7a4"),e=e(),B(),e),I={class:"vax-flex vax-margin-bottom-wide"},U={class:"vax-wrapper-scrollbar-x vax-inline-block"},q={class:"vax-table vax-inline-table vax-table-hover"},F=s(()=>t("td",{class:"vax-cell-hidden"},"\xA0",-1)),T=s(()=>t("td",{class:"vax-cell-hidden"},"\xA0",-1)),$=s(()=>t("td",{class:"vax-cell-hidden"},"\xA0",-1)),W=s(()=>t("td",{class:"vax-cell-join-right"},[t("div",{class:"vax-width-0"},"Wiek")],-1)),J=s(()=>t("td",{class:"vax-cell-join-left"},null,-1)),L=s(()=>t("td",{class:"vax-cell-join-right"},[t("div",{class:"vax-width-0"},[d("Brakuj\u0105cych"),t("br"),d("przejazd\xF3w")])],-1)),H=s(()=>t("td",{class:"vax-cell-join-left"},null,-1)),K={key:0},Z=s(()=>t("td",{class:"vax-cell-join-right"},[t("div",{class:"vax-width-0"},"Przyznano")],-1)),G={class:"vax-cell-join"},Q=s(()=>t("td",{class:"vax-cell-join-left"},null,-1)),X=s(()=>t("td",{class:"vax-cell-join-right"},[t("div",{class:"vax-width-0"},"Liczba")],-1)),Y=s(()=>t("td",{class:"vax-cell-join-left"},null,-1)),tt=s(()=>t("td",{class:"vax-cell-hidden"},"\xA0",-1)),et={class:"vax-table-row-underline"},st=s(()=>t("td",{class:"vax-cell-hidden"},"\xA0",-1)),at=s(()=>t("td",null,"Nazwa",-1)),nt=s(()=>t("td",null,"Priotytet",-1)),ot=s(()=>t("td",null,"min",-1)),lt=s(()=>t("td",null,"max",-1)),it=s(()=>t("td",null,"min",-1)),dt=s(()=>t("td",null,"max",-1)),rt={class:"vax-wrap"},ct=s(()=>t("td",null,"razem",-1)),ut=s(()=>t("td",null,"zosta\u0142o",-1)),_t=s(()=>t("td",null,"Usu\u0144",-1)),mt={class:"vax-text-align-right"},vt={class:"-vax-text-align-right"},ht={class:"vax-text-align-right"},gt={class:"vax-text-align-right"},xt={class:"vax-text-align-right"},pt={class:"vax-text-align-right"},bt={key:0,class:"vax-flex"},ft=["value"],yt=s(()=>t("i",{class:"fa fa-edit"},null,-1)),wt={key:1},Pt={class:"vax-text-align-right"},kt=["onClick"],jt=s(()=>t("i",{class:"fa fa-trash-o"},null,-1)),zt=[jt],Ct={class:"vax-wrapper-scrollbar-x vax-inline-block vax-margin-bottom"},Nt={class:"vax-table vax-inline-table vax-table-hover"},Rt=s(()=>t("thead",null,[t("tr",null,[t("td",{class:"vax-cell-hidden"},"\xA0"),t("td",{class:"vax-cell-hidden"},"\xA0"),t("td",{class:"vax-cell-join-right"},[t("div",{class:"vax-width-0"},"Wiek")]),t("td",{class:"vax-cell-join-left"})]),t("tr",{class:"vax-table-row-underline"},[t("td",null,"Nazwa"),t("td",null,"Priotytet"),t("td",null,"min"),t("td",null,"max"),t("td",null,"Sztuk razem")])],-1)),Vt=s(()=>t("td",null,[t("input",{name:"rewardName",class:"input vax-small-icon-height",required:"",maxlength:"50"})],-1)),Ot=s(()=>t("td",null,[t("input",{name:"priority",type:"number",class:"input vax-small-icon-height vax-numbers-2 vax-text-align-right",required:""})],-1)),At=s(()=>t("td",null,[t("input",{name:"totalCount",type:"number",class:"input vax-small-icon-height",required:""})],-1)),Mt={class:"vax-table vax-inline-table vax-table-hover"},Bt=s(()=>t("thead",null,[t("tr",null,[t("td",null,"Wiek"),t("td",null,[d("Bez"),t("br"),d(" nagrody")])])],-1)),St={key:0},Dt={class:"vax-text-align-right"},Et=d(" Rozdziel nagrody automatycznie "),It=d(" Resetuj przydzia\u0142 nagr\xF3d "),Ut=d(" Zatwierd\u017A przydzia\u0142 nagr\xF3d ");function qt(e,i){const r=m("vax-box"),x=m("vax-input-field"),p=m("vax-button"),y=m("rm-age-category-select"),P=m("vax-form"),k=m("vax-view");return e.jsonView?(n(),f(k,{key:0,"view-data":e.jsonView,response:e.response,"response-class":e.responseClass},{default:c(()=>[v(r,{size:"medium"},{default:c(()=>[d("Minimalna liczba przejazd\xF3w by otrzyma\u0107 nagrod\u0119: "+l(e.jsonView.minCruises),1)]),_:1}),t("div",I,[t("div",U,[t("table",q,[t("thead",null,[t("tr",null,[F,T,$,W,J,L,H,e.ageOptionsPresent.length===1?(n(),o("td",K,"Przyznano")):e.ageOptionsPresent.length>1?(n(),o(u,{key:1},[Z,(n(!0),o(u,null,g(e.ageOptionsPresent.length-2,a=>(n(),o("td",G))),256)),Q],64)):_("",!0),X,Y,tt]),t("tr",et,[st,at,nt,ot,lt,it,dt,(n(!0),o(u,null,g(e.ageOptionsPresent,a=>(n(),o("td",rt,l(e.ageOptionNames[a+1]),1))),256)),ct,ut,_t])]),t("tbody",null,[(n(!0),o(u,null,g(e.jsonView.rewards,(a,h)=>(n(),o("tr",null,[t("td",mt,l(h+1),1),t("td",null,l(a.rewardName),1),t("td",vt,l(a.priority),1),t("td",null,l(e.getAgeOptionName(a.ageCategoryMin)),1),t("td",null,l(e.getAgeOptionName(a.ageCategoryMax)),1),t("td",ht,l(a.cruisesMissedMin),1),t("td",gt,l(a.cruisesMissedMax),1),(n(!0),o(u,null,g(e.ageOptionsPresent,b=>(n(),o("td",xt,l(a.countByAge[b]),1))),256)),t("td",pt,[a.canEdit?(n(),o("div",bt,[t("input",{type:"hidden",value:a.id},null,8,ft),v(x,{modelValue:a.totalCount,"onUpdate:modelValue":b=>a.totalCount=b,type:"number",name:"name",class:"vax-margin-bottom-none vax-numbers-3"},null,8,["modelValue","onUpdate:modelValue"]),v(p,{"button-class":"is-warning vax-button-small",onClick:e.editPersonalReward},{default:c(()=>[yt]),_:1},8,["onClick"])])):(n(),o("span",wt,l(a.totalCount),1))]),t("td",Pt,l(a.remainingCount),1),t("td",null,[a.canEdit?(n(),o("button",{key:0,class:"button vax-button-small is-danger",onClick:b=>e.submitPostDirect({formName:"removePersonalReward",id:a.id})},zt,8,kt)):_("",!0)])]))),256))])])])]),v(P,{name:"addPersonalReward",action:e.postUrl,method:"POST",onSubmit:A(e.submitPostAndReset,["prevent"]),"submit-caption":"Dodaj nagrod\u0119",class:"vax-margin-bottom"},{default:c(()=>[t("div",Ct,[t("table",Nt,[Rt,t("tbody",null,[t("tr",null,[Vt,Ot,t("td",null,[v(y,{name:"ageCategoryMin"})]),t("td",null,[v(y,{name:"ageCategoryMax"})]),At])])])])]),_:1},8,["action","onSubmit"]),t("table",Mt,[Bt,t("tbody",null,[(n(!0),o(u,null,g(e.ageOptionNames,(a,h)=>(n(),o(u,null,[h!==0&&h!==4?(n(),o("tr",St,[t("td",null,l(a),1),t("td",Dt,l(e.jsonView.participantsByAgeRewardless[h-1]),1)])):_("",!0)],64))),256))])]),e.jsonView.canAssignPersonalRewards?(n(),f(p,{key:0,"button-class":"vax-width-100pct is-primary vax-margin-top vax-margin-bottom",onClick:i[0]||(i[0]=a=>e.submitPostDirect({formName:"assignAllPersonalRewards"}))},{default:c(()=>[Et]),_:1})):_("",!0),e.jsonView.canResetPersonalRewardsAssignment?(n(),f(p,{key:1,"button-class":"vax-width-100pct is-warning vax-margin-top vax-margin-bottom",onClick:i[1]||(i[1]=a=>e.submitPostDirect({formName:"resetPersonalRewardsAssignment"}))},{default:c(()=>[It]),_:1})):_("",!0),e.jsonView.personalRewardsConfirmed?_("",!0):(n(),f(p,{key:2,"button-class":"vax-width-100pct is-warning vax-margin-top vax-margin-bottom",onClick:i[2]||(i[2]=a=>e.submitPostDirect({formName:"confirmPersonalRewardsAssignment"}))},{default:c(()=>[Ut]),_:1}))]),_:1},8,["view-data","response","response-class"])):_("",!0)}var $t=S(E,[["render",qt],["__scopeId","data-v-3a2ff7a4"]]);export{$t as default};
