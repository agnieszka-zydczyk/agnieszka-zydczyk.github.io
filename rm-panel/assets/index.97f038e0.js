import{H as b,X as k,Y as y,r as i,o as l,l as c,a as s,w as d,k as a,t as r,n as v,F as w,q as j,d as u,_ as g,v as T,f as C,M as S,g as M,i as V,j as z,Z as F,s as I,c as _,b as A,J as B,K as L}from"./index.ef40ff0d.js";import{v as $}from"./index.33a94f37.js";import"./index.cc9afd3f.js";var G={components:{vaxBox:b},props:{namePrefix:String,userRole:String,mailingGroup:Array},methods:{userManages:e=>{var o;return(o=e.manages)!=null?o:k[y[e.role]]},toggleTableCheckboxes(e){var o=e.target.checked;for(var t of this.$refs.toggleGroup.getElementsByTagName("input"))t.checked=o}}};const P={key:0},D=["name"],K=v(" ka\u017Cdy "),N={key:1},E={class:"vax-table"},R={class:"vax-table-row-underline"},Z=a("td",{class:"vax-bold"},"Imi\u0119 i nazwisko",-1),U=a("td",{class:"vax-bold"},"Email",-1),q=a("td",{class:"vax-bold"},"Zarz\u0105dza",-1),H={ref:"toggleGroup"},J=["name","value"];function O(e,o){const t=i("vax-box");return e.mailingGroup===null?(l(),c("div",P,[s(t,{class:"vax-margin-bottom",size:"medium",bold:!1,rounded:""},{default:d(()=>[a("input",{name:e.namePrefix+"_all",value:"1",type:"checkbox",class:"vax-margin-right-medium"},null,8,D),K,a("b",null,r(e.userRole),1)]),_:1})])):e.mailingGroup!==void 0?(l(),c("div",N,[s(t,{size:"medium"},{default:d(()=>[v(r(e.userRole),1)]),_:1}),a("table",E,[a("thead",null,[a("tr",R,[a("td",null,[a("input",{type:"checkbox",onClick:o[0]||(o[0]=(...n)=>e.toggleTableCheckboxes&&e.toggleTableCheckboxes(...n))})]),Z,U,q])]),a("tbody",H,[(l(!0),c(w,null,j(e.mailingGroup,(n,p)=>(l(),c("tr",null,[a("td",null,[a("input",{type:"checkbox",name:e.namePrefix+"[]",value:n.id},null,8,J)]),a("td",null,r(n.name),1),a("td",null,r(n.email),1),a("td",null,r(e.userManages(n)),1)]))),256))],512)])])):u("",!0)}var X=g(G,[["render",O]]);const Y="fileList";var Q={name:"rmMailing",components:{vaxView:T,vaxForm:C,vaxCombobox:S,vaxFileSelect:$,vaxField:M,vaxInputField:V,vaxMailingBox:X},data:()=>({}),methods:{mailTo(e){this.submitPost(e)},goToFiles(){this.$router.push("/files")}},mixins:[z,F(Y),I]};const x=e=>(B("data-v-48c85616"),e=e(),L(),e),W=x(()=>a("textarea",{name:"mailContent",class:"textarea vax-textarea"},`\r
Uwaga: informujemy, \u017Ce ...\r
`,-1)),ee=x(()=>a("b",null,"Adresaci (wysy\u0142ka ograniczona do bie\u017C\u0105cego kontekstu):",-1)),ae={class:"vax-margin-top"};function oe(e,o){const t=i("vax-input-field"),n=i("vax-field"),p=i("vax-file-select"),m=i("vax-mailing-box"),f=i("vax-form"),h=i("vax-view");return e.jsonView?(l(),_(h,{key:0,"view-data":e.jsonView,response:e.response,"response-class":e.responseClass,class:"vax-padding-left"},{default:d(()=>[s(f,{name:"mailTo",action:e.postUrl,method:"POST",onSubmit:A(e.mailTo,["prevent"])},{default:d(()=>[s(t,{caption:"Temat wiadomo\u015Bci",name:"mailSubject",value:"Majowy Maj - komunikat"}),s(n,{caption:"Tre\u015B\u0107 wiadomo\u015Bci"},{default:d(()=>[W]),_:1}),e.jsonView.canAttach?(l(),_(p,{key:0,"file-list":e.fileList,caption:"Za\u0142\u0105czniki","go-to-caption":"Dodaj inne za\u0142\u0105czniki...","go-to-path":"/files"},null,8,["file-list"])):u("",!0),ee,a("div",ae,[s(m,{"name-prefix":"cityCoords","mailing-group":e.jsonView.cityCoords,"user-role":"Koordynator Miejski"},null,8,["mailing-group"]),s(m,{"name-prefix":"unitCoords","mailing-group":e.jsonView.unitCoords,"user-role":"Koordynator Szkolny"},null,8,["mailing-group"]),s(m,{"name-prefix":"journalKeepers","mailing-group":e.jsonView.journalKeepers,"user-role":"nauczyciel"},null,8,["mailing-group"])])]),_:1},8,["action","onSubmit"])]),_:1},8,["view-data","response","response-class"])):u("",!0)}var te=g(Q,[["render",oe],["__scopeId","data-v-48c85616"]]);export{te as default};
