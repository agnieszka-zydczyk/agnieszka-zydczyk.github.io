import{v as x,f as C,H as N,M as R,i as S,R as P,j as z,s as D,r as u,o as a,c as v,w as n,l as i,a as o,n as d,t as w,A as G,b as j,F as _,d as l,k as s,q as I,J as B,K as E,_ as T}from"./index.ef40ff0d.js";import{r as U}from"./index.4e8d9ee6.js";var M={name:"rmJournalEdit",components:{vaxView:x,vaxForm:C,vaxBox:N,vaxCombobox:R,vaxInputField:S,vaxButton:P,rmT12nSelect:U},data(){return{afterPost:()=>this.getJsonViewData()}},methods:{changeDayNr(e){this.$router.push({path:"/journalEdit",query:{dayNr:e.target.value}})},editParticipant(e){const p=e.target;var t;for(t=p;t.tagName.toUpperCase()!=="TR";t=t.parentElement);const c=t.getElementsByTagName("input");this.submitPostDirect({formName:"editParticipant",id:c[0].value,name:c[1].value})}},mixins:[z,D]};const m=e=>(B("data-v-2d7c355c"),e=e(),E(),e),A=d(" Liczba os\xF3b: "),F=d(" Nagroda preferowana: "),J=d(" Nagroda niepo\u017C\u0105dana: "),O={class:"vax-wrapper-scrollbar-x"},$={class:"vax-table"},q={class:"vax-table-row-underline"},L=m(()=>s("td",{class:"vax-cell-hidden vax-table-ordinal"},"\xA0",-1)),H=m(()=>s("td",null,"Imi\u0119/nazwisko",-1)),K={key:0},Z={key:1},Q=d("Usu\u0144"),W=m(()=>s("br",null,null,-1)),X=d("osob\u0119"),Y=[Q,W,X],ee={class:"vax-text-align-right vax-table-ordinal"},ae={class:"pcp-name vax-text-large"},se={key:0,class:"vax-flex"},ne=["value"],oe=m(()=>s("i",{class:"fa fa-edit"},null,-1)),te={key:1},ie={key:0},le={key:1},de=m(()=>s("i",{class:"fa fa-ban"},null,-1)),re=["value"],ue=d(" wyczy\u015B\u0107 ca\u0142y dziennik ");function ce(e,p){const t=u("vax-box"),c=u("vax-combobox"),V=u("vax-input-field"),h=u("vax-button"),k=u("rm-t12n-select"),f=u("vax-form"),y=u("vax-view");return e.jsonView?(a(),v(y,{key:0,"view-data":e.jsonView,response:e.response,"response-class":e.responseClass},{default:n(()=>[e.jsonView&&!e.jsonView.contextMissing?(a(),i(_,{key:0},[o(t,{class:"vax-margin-right-wide",size:"medium",shadow:!1},{default:n(()=>[A]),_:1}),o(t,{size:"medium"},{default:n(()=>[d(" Zadeklarowana: "+w(e.jsonView.declaredCount),1)]),_:1}),o(t,{size:"medium",class:G(["hero",e.jsonView.declaredCount===e.jsonView.participants.length?"is-success":"is-danger"])},{default:n(()=>[d(" Obecna: "+w(e.jsonView.participants.length),1)]),_:1},8,["class"]),e.jsonView.participants.length>0?(a(),v(f,{key:0,"has-submit":e.jsonView.canSelectRewards||e.jsonView.canSelectCruises,name:"journalEdit",action:e.postUrl,method:"POST",onSubmit:j(e.submitPost,["prevent"])},{default:n(()=>[e.jsonView.hasRewards?(a(),i(_,{key:0},[o(c,{class:"vax-inline-block vax-margin-right-wide vax-margin-left",horizontal:"",name:"preferredGroupReward",captions:e.jsonView.possibleGroupRewards.names,values:e.jsonView.possibleGroupRewards.ids,"selected-value":e.jsonView.preferredGroupRewardId,disabled:!e.jsonView.canSelectRewards},{default:n(()=>[F]),_:1},8,["captions","values","selected-value","disabled"]),o(c,{class:"vax-inline-block vax-margin-bottom vax-margin-left",horizontal:"",name:"unwantedGroupReward",captions:e.jsonView.possibleGroupRewards.names,values:e.jsonView.possibleGroupRewards.ids,"selected-value":e.jsonView.unwantedGroupRewardId,disabled:!e.jsonView.canSelectRewards},{default:n(()=>[J]),_:1},8,["captions","values","selected-value","disabled"])],64)):l("",!0),s("div",O,[s("table",$,[s("thead",null,[s("tr",q,[L,H,e.jsonView.canSelectCruises&&e.jsonView.dateNrs.length>0?(a(),i("td",K,[o(c,{class:"vax-flex-center","selected-value":e.jsonView.dateNr,name:"dayNr",onChange:e.changeDayNr,captions:e.jsonView.dateCaptions,values:e.jsonView.dateNrs},null,8,["selected-value","onChange","captions","values"])])):l("",!0),e.jsonView.canRemove?(a(),i("td",Z,Y)):l("",!0)])]),s("tbody",null,[(a(!0),i(_,null,I(e.jsonView.participants,(r,b)=>(a(),i("tr",null,[s("td",ee,w(b+1),1),s("td",ae,[e.jsonView.canEdit?(a(),i("div",se,[s("input",{type:"hidden",value:r.id},null,8,ne),o(V,{modelValue:r.name,"onUpdate:modelValue":g=>r.name=g,name:"name",class:"vax-margin-bottom-none",maxlength:"50"},null,8,["modelValue","onUpdate:modelValue"]),o(h,{"button-class":"is-warning vax-button-small",onClick:e.editParticipant},{default:n(()=>[oe]),_:1},8,["onClick"])])):(a(),i("span",te,w(r.name),1))]),e.jsonView.canSelectCruises&&e.jsonView.dateNrs.length>0?(a(),i("td",ie,[o(k,{options:e.jsonView.t12ns,"name-suffix":"["+b+"]",i:b,iChecked:[r.t12n]},null,8,["options","name-suffix","i","iChecked"])])):l("",!0),e.jsonView.canRemove?(a(),i("td",le,[o(h,{"button-class":"is-danger vax-button-small",onClick:g=>{e.submitPostDirect({formName:"removeParticipants",id:r.id})}},{default:n(()=>[de]),_:2},1032,["onClick"])])):l("",!0)]))),256))])])]),s("input",{type:"hidden",name:"dateNr",value:e.jsonView.dateNr},null,8,re)]),_:1},8,["has-submit","action","onSubmit"])):l("",!0),e.jsonView.canRemove&&e.jsonView.participants.length>0?(a(),v(h,{key:1,"button-class":"is-danger vax-margin-top",onClick:p[0]||(p[0]=r=>e.submitPostDirect({formName:"removeParticipants",removeAll:!0}))},{default:n(()=>[ue]),_:1})):l("",!0),e.jsonView.canAdd?(a(),v(f,{key:2,name:"addParticipants",action:e.postUrl,method:"POST",onSubmit:j(e.submitPostAndReset,["prevent"]),"submit-caption":"Dodaj","submit-button-class":"is-primary vax-width-100pct"},{default:n(()=>[o(t,{size:"large",class:"vax-margin-top vax-margin-bottom"},{default:n(()=>[o(V,{caption:"Dodaj osob\u0119/osoby...",name:"names",placeholder:"imi\u0119 i nazwisko; imi\u0119 i nazwisko..."})]),_:1})]),_:1},8,["action","onSubmit"])):l("",!0)],64)):l("",!0)]),_:1},8,["view-data","response","response-class"])):l("",!0)}var ve=T(M,[["render",ce],["__scopeId","data-v-2d7c355c"]]);export{ve as default};
