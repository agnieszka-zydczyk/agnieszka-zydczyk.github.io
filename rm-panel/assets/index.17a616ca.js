import{v as S,f as V,H as C,g as T,i as M,R as F,X as I,Y as N,U as B,V as D,j as L,Z as P,s as E,a2 as A,r as i,o as s,c as w,w as n,l as d,a as t,n as _,t as r,k as a,F as h,q as g,d as v,b as U,J as W,K as Z,_ as $}from"./index.ef40ff0d.js";import{v as q}from"./index.f7dea7a9.js";import{v as J}from"./index.33a94f37.js";import"./index.cc9afd3f.js";const O="fileList";var R={name:"rmPermissions",components:{vaxView:S,vaxForm:V,vaxBox:C,vaxField:T,vaxInputField:M,vaxButton:F,vaxFileInput:q,vaxFileSelect:J},data(){return{afterPost:()=>this.getJsonViewData()}},methods:{userManages:e=>{var p;return(p=e.manages)!=null?p:I[N[e.role]]},importFromCsv(e){B(e.target.form,p=>{const m=[],c=[];for(const u of p){const o=u.split(/[,;]+/);o[0]!==void 0&&o[0]!==""&&o[1]!==void 0&&o[1]!==""&&(m.push(o[0].trim()),c.push(o[1].trim()))}document.getElementsByName("name")[0].value=m.join(";"),document.getElementsByName("email")[0].value=c.join(";")})||alert(D)},goToUserSettings(e){this.$router.push({path:"/accountSettings",query:{id:e}})},mailTo(e){this.submitPost(e)}},mixins:[L,P(O),E,A]};const f=e=>(W("data-v-f80716a4"),e=e(),Z(),e),H={class:"vax-wrapper-scrollbar-x"},K={class:"vax-table"},X=f(()=>a("thead",null,[a("tr",{class:"vax-table-row-underline vax-bold"},[a("td",null,"Imi\u0119 i nazwisko"),a("td",null,"Zarz\u0105dza"),a("td",null,"Email"),a("td",null,"Ostatnie logowanie"),a("td",null,"Wi\u0119cej...")])],-1)),Y={class:"vax-wrap"},Q={class:"vax-flex-center"},G=f(()=>a("i",{class:"fa fa-wrench"},null,-1)),ee=f(()=>a("i",{class:"fa fa-trash-o"},null,-1)),ae={key:0,class:"box vax-margin-top"},te=f(()=>a("textarea",{name:"mailContent",class:"textarea vax-textarea"},`\r
Dzie\u0144 dobry,\r
zosta\u0142e\u015B zaproszony do wsp\xF3\u0142pracy w ramach kampanii "Majowy Maj".\r
Wejd\u017A na stron\u0119 systemu MM Panel znajduj\u0105c\u0105 si\u0119 pod adresem https://google.pl ,\r
a nast\u0119pnie zaloguj si\u0119 danymi, kt\xF3re otrzymasz w nast\u0119pnej wiadomo\u015Bci email.\r
`,-1)),se=_(" Importuj list\u0119 adresat\xF3w z CSV ");function ne(e,p){const m=i("vax-box"),c=i("vax-button"),u=i("vax-input-field"),o=i("vax-field"),y=i("vax-file-select"),b=i("vax-file-input"),z=i("vax-form"),j=i("vax-view");return e.jsonView?(s(),w(j,{key:0,"view-data":e.jsonView,response:e.response,"response-class":e.responseClass},{default:n(()=>[e.jsonView.contextMissing?v("",!0):(s(),d(h,{key:0},[t(m,{size:"medium"},{default:n(()=>[_("Rodzaj wysy\u0142anych zaprosze\u0144: "+r(e.permissionTypeToName(e.jsonView.permissionType)),1)]),_:1}),a("div",H,[(s(!0),d(h,null,g(e.jsonView.userGroups,x=>(s(),d("div",null,[t(m,{size:"medium",class:"vax-margin-left vax-margin-top-small"},{default:n(()=>[_(r(e.permissionTypeToName(x.type)),1)]),_:2},1024),t(m,{size:"medium"},{default:n(()=>[_(" Liczba os\xF3b: "+r(x.list.length),1)]),_:2},1024),a("table",K,[X,a("tbody",null,[(s(!0),d(h,null,g(x.list,(l,oe)=>(s(),d("tr",null,[a("td",Y,r(l.name),1),a("td",null,r(e.userManages(l)),1),a("td",null,r(l.email),1),a("td",null,r(l.lastLogin),1),a("td",null,[a("div",Q,[t(c,{class:"vax-flex-center vax-margin-bottom-none","button-class":"is-primary vax-button-small",onClick:k=>e.goToUserSettings(l.id)},{default:n(()=>[G]),_:2},1032,["onClick"]),l.canBeDeleted?(s(),w(c,{key:0,class:"vax-flex-center vax-margin-left","button-class":"is-danger vax-button-small",onClick:k=>e.submitPostDirect({formName:"deleteUser",id:l.id})},{default:n(()=>[ee]),_:2},1032,["onClick"])):v("",!0)])])]))),256))])])]))),256))]),e.jsonView.canInvite?(s(),d("div",ae,[t(z,{name:"invite",action:e.postUrl,method:"POST",onSubmit:U(e.submitPost,["prevent"])},{default:n(()=>[t(u,{caption:"Temat wiadomo\u015Bci",name:"mailSubject",value:"Majowy Maj - zaproszenie do udzia\u0142u"}),t(o,{caption:"Tre\u015B\u0107 wiadomo\u015Bci"},{default:n(()=>[te]),_:1}),e.jsonView.canAttach?(s(),w(y,{key:0,"file-list":e.fileList,caption:"Za\u0142\u0105czniki","go-to-caption":"Dodaj inne za\u0142\u0105czniki...","go-to-path":"/files"},null,8,["file-list"])):v("",!0),t(b,{class:"has-name is-boxed",caption:"Wybierz plik CSV..."}),t(c,{"button-class":"is-primary",onClick:e.importFromCsv},{default:n(()=>[se]),_:1},8,["onClick"]),t(u,{caption:"Nazwa",name:"name",placeholder:"nazwa; nazwa; nazwa"}),t(u,{caption:"Email",name:"email",placeholder:"email; email; email"})]),_:1},8,["action","onSubmit"])])):v("",!0)],64))]),_:1},8,["view-data","response","response-class"])):v("",!0)}var ce=$(R,[["render",ne],["__scopeId","data-v-f80716a4"]]);export{ce as default};
