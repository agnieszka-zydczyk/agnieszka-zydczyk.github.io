import{v as V,f as z,R as y,S as j,T as p,U as k,V as S,j as B,s as N,r as w,o as n,c as T,w as _,l as a,k as t,t as d,A as f,a as g,d as x,F as r,q as h,b as E,n as I,J as F,K as A,_ as U}from"./index.ef40ff0d.js";import{v as P}from"./index.f7dea7a9.js";var D={name:"rmDefineClazzes",components:{vaxView:V,vaxForm:z,vaxButton:y,vaxFileInput:P},data(){return{levelNamesByUnitType:j,afterPost:()=>this.getJsonViewData()}},computed:{computedCountsKids(){return p(this.jsonView.counts[0]).reduce((e,o)=>e+p(o).reduce((l,s)=>l+s,0),0)},computedCountsAdults(){return p(this.jsonView.counts[1]).reduce((e,o)=>e+p(o).reduce((l,s)=>l+s,0),0)},computedCountsClazzes(){return p(this.jsonView.counts[0]).reduce((e,o)=>e+p(o).reduce((l,s)=>l+(s===0?0:1),0),0)}},methods:{getCount(e,o,l){var i;const s=this.jsonView.counts;if(s[e]===void 0)return;const m=s[e];if(m[o]!==void 0)return(i=m[o][l])!=null?i:void 0},importFromCsv(e){k(e.target.form,o=>{const l=document.getElementById("clazz-data-table").getElementsByTagName("tr");for(var s=0,m=o.length;s<m;s++){const v=l[s].getElementsByTagName("td"),c=o[s].split(/[,; ]+/);for(var i=0,u=c.length;i<u;i++){const b=c[i];b!==""&&(v[i].getElementsByTagName("input")[0].value=b)}}})||alert(S)}},mixins:[B,N]};const C=e=>(F("data-v-49ce2ab5"),e=e(),A(),e),K={class:"vax-table vax-bold vax-margin-right-wide"},M=C(()=>t("thead",null,[t("tr",{class:"vax-table-row-underline"},[t("td",{class:"vax-cell-hidden"}),t("td",null,"uczni\xF3w/dzieci"),t("td",null,"pracownik\xF3w"),t("td",null,"klas/grup")])],-1)),O=C(()=>t("td",null,"Zadeklarowane:",-1)),J=C(()=>t("td",null,"Obliczone:",-1)),q={key:0},L=I(" Importuj liczebno\u015Bci z CSV "),R={class:"vax-flex vax-margin-bottom"},Z={class:"vax-table vax-margin-right vax-inline-table"},G=C(()=>t("thead",null,[t("tr",{class:"vax-table-row-underline"},[t("th",null,"Poziom")])],-1)),H={style:{margin:"4px 0"},class:"vax-icon-small-height vax-flex-center-vertical vax-text-large"},Q={class:"vax-wrapper-scrollbar-x vax-inline-block"},W={class:"vax-table vax-inline-table vax-table-hover"},X={class:"vax-table-row-underline"},Y={id:"clazz-data-table"},$={template:""},ee=["name","value","disabled"];function te(e,o){const l=w("vax-file-input"),s=w("vax-button"),m=w("vax-form"),i=w("vax-view");return e.jsonView?(n(),T(i,{key:0,"view-data":e.jsonView,response:e.response,"response-class":e.responseClass},{default:_(()=>[e.jsonView.contextMissing?x("",!0):(n(),a(r,{key:0},[t("table",K,[M,t("tbody",null,[t("tr",null,[O,t("td",null,d(e.jsonView.declaredCounts.kids),1),t("td",null,d(e.jsonView.declaredCounts.adults),1),t("td",null,d(e.jsonView.declaredCounts.clazzes),1)]),t("tr",null,[J,t("td",{class:f(["hero vax-table-cell",e.jsonView.declaredCounts.kids===e.computedCountsKids?"is-success":"is-danger"])},d(e.computedCountsKids),3),t("td",{class:f(["hero vax-table-cell",e.jsonView.declaredCounts.adults===e.computedCountsAdults?"is-success":"is-danger"])},d(e.computedCountsAdults),3),t("td",{class:f(["hero vax-table-cell",e.jsonView.declaredCounts.clazzes===e.computedCountsClazzes?"is-success":"is-danger"])},d(e.computedCountsClazzes),3)])])]),e.jsonView.canEdit?(n(),a("form",q,[g(l,{class:"has-name is-boxed"}),g(s,{class:"vax-margin-top-auto","button-class":"is-warning",onClick:e.importFromCsv},{default:_(()=>[L]),_:1},8,["onClick"])])):x("",!0),g(m,{class:"vax-margin-top","div-fieldset":"",name:"defineClazzes",action:e.postUrl,method:"POST",onSubmit:E(e.submitPostUpdateContext,["prevent"]),"has-submit":e.jsonView.canEdit},{default:_(()=>[t("div",R,[t("table",Z,[G,t("tbody",null,[(n(!0),a(r,null,h(e.jsonView.levelCounts,(u,v)=>(n(),a(r,null,[(n(!0),a(r,null,h(u,c=>(n(),a("tr",null,[t("th",null,[t("div",H,d(e.levelNamesByUnitType[e.jsonView.unitType][v][c-1]),1)])]))),256))],64))),256))])]),t("div",Q,[t("table",W,[t("thead",null,[t("tr",X,[(n(!0),a(r,null,h(e.jsonView.maxOrdinal,u=>(n(),a("td",null,d(String.fromCharCode("a".charCodeAt(0)+u-1)),1))),256))])]),t("tbody",Y,[(n(!0),a(r,null,h(e.jsonView.levelCounts,(u,v)=>(n(),a(r,null,[(n(!0),a(r,null,h(u,c=>(n(),a("tr",null,[(n(!0),a(r,null,h(e.jsonView.maxOrdinal,b=>(n(),a("td",$,[t("input",{type:"number",min:"0",max:"99",name:"declCounts["+v+"]["+(c-1)+"]["+(b-1)+"]",value:e.getCount(v,c-1,b-1),class:"input vax-small-icon-height",placeholder:"0",disabled:!e.jsonView.canEdit},null,8,ee)]))),256))]))),256))],64))),256))])])])])]),_:1},8,["action","onSubmit","has-submit"])],64))]),_:1},8,["view-data","response","response-class"])):x("",!0)}var ae=U(D,[["render",te],["__scopeId","data-v-49ce2ab5"]]);export{ae as default};
